<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Life Studio</title>
    <link rel="stylesheet" href="/src/css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- App Header -->
        <div class="app-header">
            <div class="header-left">
                <button id="mobileMenuBtn" class="mobile-menu-btn">â˜°</button>
                <h1>Game of Life Studio</h1>
            </div>
            <div class="header-controls">
                <button id="darkModeToggle" class="dark-mode-toggle" title="Toggle Dark Mode" data-tooltip="Toggle Theme" data-tooltip-pos="bottom">
                    <i data-lucide="moon" class="toggle-icon"></i>
                </button>
                <a href="explanation.html" class="help-btn" title="Learn About the Game of Life" data-tooltip="Help" data-tooltip-pos="bottom">?</a>
            </div>
        </div>
        
        <div class="app-body">
            <!-- Mobile Sidebar Overlay -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>
            
            <!-- Left Sidebar -->
            <div class="sidebar">
                <!-- Icon Nav Bar -->
                <div class="sidebar-nav">
                    <button class="sidebar-nav-btn active" data-tab="controls" title="Controls">
                        <i data-lucide="settings"></i>
                    </button>
                    <button class="sidebar-nav-btn" data-tab="tools" title="Drawing Tools">
                        <i data-lucide="pen-tool"></i>
                    </button>
                    <button class="sidebar-nav-btn" data-tab="patterns" title="Patterns">
                        <i data-lucide="layout-grid"></i>
                    </button>
                    <button class="sidebar-nav-btn" data-tab="recordings" title="Recordings">
                        <i data-lucide="video"></i>
                    </button>
                    <div class="sidebar-nav-spacer"></div>
                    <button id="sidebarToggle" class="sidebar-nav-btn sidebar-toggle-btn" title="Collapse Sidebar">
                        <i data-lucide="panel-left-close"></i>
                    </button>
                </div>

                <!-- Tab Panels -->
                <div class="sidebar-panels">
                    <!-- Controls Tab -->
                    <div class="sidebar-panel active" data-panel="controls">
                        <div class="sidebar-panel-header"><h2>Controls</h2></div>
                        <div class="sidebar-panel-content">
                            <!-- Simulation Section -->
                            <div class="tool-section">
                                <h3>Simulation</h3>
                                <div class="speed-control slider-control">
                                    <div class="slider-label-row">
                                        <label for="speedSlider">Speed:</label>
                                        <button class="max-toggle-btn" title="Set max value" data-target="speedMax">
                                            <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                        </button>
                                        <input type="number" id="speedMax" class="max-input" value="80" min="10" placeholder="Max">
                                    </div>
                                    <div class="slider-group">
                                        <input type="range" id="speedSlider" min="1" max="80" value="40">
                                        <span id="speedValue">40</span>
                                    </div>
                                </div>
                                <div class="visual-toolbar">
                                    <div class="toolbar-group">
                                        <button id="pixelGridToggle" class="toolbar-btn" title="Toggle Pixel Grid">
                                            <i data-lucide="hash" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Pixels</span>
                                        </button>
                                        <button id="gridToggle" class="toolbar-btn" title="Toggle Grid Overlay">
                                            <i data-lucide="grid-3x3" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Grid</span>
                                        </button>
                                        <button id="fadeToggle" class="toolbar-btn" title="Toggle Ghost Trail Mode">
                                            <i data-lucide="ghost" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Trail</span>
                                        </button>
                                        <button id="maturityToggle" class="toolbar-btn" title="Toggle Cell Maturity Mode">
                                            <i data-lucide="timer" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Maturity</span>
                                        </button>
                                        <button id="cellShapeToggle" class="toolbar-btn" title="Toggle Cell Shape">
                                            <i data-lucide="square" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Shape</span>
                                        </button>
                                        <button id="autoStopToggle" class="toolbar-btn" title="Toggle Auto-Stop Mode">
                                            <i data-lucide="pause-circle" class="toolbar-icon"></i>
                                            <span class="toolbar-label">Auto-Stop</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="settings-panels">
                                    <div class="fade-settings panel-settings" id="fadeSettings" style="display: none;">
                                        <h4>Ghost Trail Settings</h4>
                                        <div class="setting-row slider-control">
                                            <div class="slider-label-row">
                                                <label for="fadeSlider">Trail Duration:</label>
                                                <button class="max-toggle-btn" title="Set max value" data-target="fadeMax">
                                                    <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                                </button>
                                                <input type="number" id="fadeMax" class="max-input" value="40" min="5" placeholder="Max">
                                            </div>
                                            <div class="slider-group">
                                                <input type="range" id="fadeSlider" min="1" max="40" value="20">
                                                <span id="fadeValue">20</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="maturity-settings panel-settings" id="maturitySettings" style="display: none;">
                                        <h4>Maturity Settings</h4>
                                        <div class="setting-row">
                                            <label for="maturityColor">Mature Color:</label>
                                            <div class="color-group">
                                                <input type="color" id="maturityColor" value="#4c1d95" class="color-input">
                                                <span class="color-label">Deep Violet</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="autostop-settings panel-settings" id="autoStopSettings" style="display: none;">
                                        <h4>Auto-Stop Settings</h4>
                                        <div class="setting-row">
                                            <label for="autoStopDelay">Detection Delay:</label>
                                            <div class="slider-group">
                                                <input type="range" id="autoStopDelay" min="2" max="40" value="20">
                                                <span id="autoStopDelayValue">20</span>
                                                <span class="unit-label">generations</span>
                                            </div>
                                        </div>
                                        <div class="setting-row">
                                            <label class="checkbox-container">
                                                <input type="checkbox" id="autoStopNotification" checked>
                                                <span class="checkmark"></span>
                                                Show notification when stopping
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Grid Settings Section -->
                            <div class="tool-section">
                                <h3>Grid Settings</h3>
                                <div class="slider-control">
                                    <div class="slider-label-row">
                                        <label for="gridWidthSlider">Width:</label>
                                        <button id="fitWidthBtn" class="fit-btn" title="Fit width to viewport" data-tooltip="Fit width" data-tooltip-pos="bottom">
                                            <i data-lucide="maximize-2" class="fit-btn-icon"></i>
                                        </button>
                                        <button class="max-toggle-btn" title="Set max value" data-target="gridWidthMax">
                                            <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                        </button>
                                        <input type="number" id="gridWidthMax" class="max-input" value="480" min="60" placeholder="Max">
                                    </div>
                                    <div class="slider-group">
                                        <input type="range" id="gridWidthSlider" min="30" max="480" value="240">
                                        <span id="gridWidthValue">240</span>
                                    </div>
                                </div>
                                <div class="slider-control">
                                    <div class="slider-label-row">
                                        <label for="gridHeightSlider">Height:</label>
                                        <button id="fitHeightBtn" class="fit-btn" title="Fit height to viewport" data-tooltip="Fit height" data-tooltip-pos="bottom">
                                            <i data-lucide="maximize-2" class="fit-btn-icon"></i>
                                        </button>
                                        <button class="max-toggle-btn" title="Set max value" data-target="gridHeightMax">
                                            <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                        </button>
                                        <input type="number" id="gridHeightMax" class="max-input" value="320" min="40" placeholder="Max">
                                    </div>
                                    <div class="slider-group">
                                        <input type="range" id="gridHeightSlider" min="20" max="320" value="160">
                                        <span id="gridHeightValue">160</span>
                                    </div>
                                </div>
                                <div class="slider-control">
                                    <div class="slider-label-row">
                                        <label for="cellSizeSlider">Cell Size:</label>
                                        <button class="max-toggle-btn" title="Set max value" data-target="cellSizeMax">
                                            <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                        </button>
                                        <input type="number" id="cellSizeMax" class="max-input" value="80" min="10" placeholder="Max">
                                    </div>
                                    <div class="slider-group">
                                        <input type="range" id="cellSizeSlider" min="3" max="80" value="40">
                                        <span id="cellSizeValue">40px</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Random Generation Section -->
                            <div class="tool-section">
                                <h3><i data-lucide="shuffle" class="section-title-icon"></i>Random Generation</h3>
                                <div class="slider-control">
                                    <div class="slider-label-row">
                                        <label for="randomDensitySlider">Density:</label>
                                        <button class="max-toggle-btn" title="Set max value" data-target="randomDensityMax">
                                            <i data-lucide="settings-2" class="max-toggle-icon"></i>
                                        </button>
                                        <input type="number" id="randomDensityMax" class="max-input" value="100" min="30" placeholder="Max">
                                    </div>
                                    <div class="slider-group">
                                        <input type="range" id="randomDensitySlider" min="5" max="100" value="50">
                                        <span id="randomDensityValue">50%</span>
                                    </div>
                                </div>
                                <div class="control-row">
                                    <label for="randomSeedInput">Seed:</label>
                                    <input type="number" id="randomSeedInput" value="" placeholder="Random">
                                    <button id="generateSeedBtn" class="seed-btn" data-tooltip="Generate seed">ðŸŽ²</button>
                                </div>
                            </div>
                            <!-- Custom Rules Section -->
                            <div class="tool-section">
                                <div class="section-header" data-toggle="rules">
                                    <h3>ðŸ§¬ Custom Rules</h3>
                                    <i data-lucide="chevron-down" class="section-toggle"></i>
                                </div>
                                <div class="section-content">
                                    <div class="rule-presets">
                                        <label>Presets:</label>
                                        <select id="rulePresets" class="rule-preset-select">
                                            <option value="B3/S23">Conway's Life (B3/S23)</option>
                                            <option value="B36/S23">HighLife (B36/S23)</option>
                                            <option value="B3/S238">Mazectric (B3/S238)</option>
                                            <option value="B368/S245">Move (B368/S245)</option>
                                            <option value="B2/S">Seeds (B2/S)</option>
                                            <option value="B1/S1">Gnarl (B1/S1)</option>
                                            <option value="B1357/S1357">Replicator (B1357/S1357)</option>
                                            <option value="custom">Custom...</option>
                                        </select>
                                    </div>
                                    <div class="custom-rule-inputs" id="customRuleInputs">
                                        <div class="rule-input-group">
                                            <div class="rule-input-header">
                                                <label>Birth (B):</label>
                                            </div>
                                            <span class="rule-description">Dead cells become alive with N neighbors</span>
                                            <div class="neighbor-checkboxes-compact">
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth0" value="0"><span>0</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth1" value="1"><span>1</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth2" value="2"><span>2</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth3" value="3" checked><span>3</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth4" value="4"><span>4</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth5" value="5"><span>5</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth6" value="6"><span>6</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth7" value="7"><span>7</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="birth8" value="8"><span>8</span></label>
                                            </div>
                                        </div>
                                        <div class="rule-input-group">
                                            <div class="rule-input-header">
                                                <label>Survival (S):</label>
                                            </div>
                                            <span class="rule-description">Live cells survive with N neighbors</span>
                                            <div class="neighbor-checkboxes-compact">
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive0" value="0"><span>0</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive1" value="1"><span>1</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive2" value="2" checked><span>2</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive3" value="3" checked><span>3</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive4" value="4"><span>4</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive5" value="5"><span>5</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive6" value="6"><span>6</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive7" value="7"><span>7</span></label>
                                                <label class="checkbox-label-compact"><input type="checkbox" id="survive8" value="8"><span>8</span></label>
                                            </div>
                                        </div>
                                        <div class="rule-display">
                                            <label>Current Rule:</label>
                                            <div class="rule-string" id="currentRuleString">B3/S23</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Quick Actions Section -->
                            <div class="tool-section">
                                <h3>Quick Actions</h3>
                                <div class="quick-actions">
                                    <button id="fillRandomBtn" data-tooltip="Fill grid randomly">Fill Random</button>
                                    <button id="fillEdgesBtn" data-tooltip="Fill edge cells">Fill Edges</button>
                                    <button id="fillCenterBtn" data-tooltip="Fill center area">Fill Center</button>
                                    <button id="invertBtn" data-tooltip="Invert all cells">Invert All</button>
                                </div>
                            </div>
                            <!-- Settings Management Section -->
                            <div class="tool-section">
                                <h3>Settings</h3>
                                <div class="quick-actions">
                                    <button id="exportSettingsBtn" title="Export settings to file" data-tooltip="Export settings to file">
                                        <i data-lucide="download" class="btn-icon-inline"></i>
                                        Export
                                    </button>
                                    <button id="importSettingsBtn" title="Import settings from file" data-tooltip="Import settings from file">
                                        <i data-lucide="upload" class="btn-icon-inline"></i>
                                        Import
                                    </button>
                                    <button id="resetDefaultsBtn" title="Reset all settings to defaults" data-tooltip="Reset all to defaults">
                                        <i data-lucide="rotate-ccw" class="btn-icon-inline"></i>
                                        Reset Defaults
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Drawing Tools Tab -->
                    <div class="sidebar-panel" data-panel="tools">
                        <div class="sidebar-panel-header"><h2>Drawing Tools</h2></div>
                        <div class="sidebar-panel-content">
                            <p class="section-desc">Select a tool, then click on the grid</p>
                            <div class="drawing-tools">
                                <button id="cellDrawingBtn" class="tool-btn selected" title="Single Cell Drawing">
                                    <i data-lucide="pen-tool" class="tool-icon"></i>
                                    <span>Single Cell</span>
                                </button>
                                <button id="cellInspectorBtn" class="tool-btn" title="Cell Inspector">
                                    <i data-lucide="search" class="tool-icon"></i>
                                    <span>Cell Inspector</span>
                                </button>
                                <button id="patternSelectBtn" class="tool-btn" title="Select Pattern">
                                    <i data-lucide="mouse-pointer-square-dashed" class="tool-icon"></i>
                                    <span>Select Pattern</span>
                                </button>
                                <button id="eraserBtn" class="tool-btn" title="Eraser">
                                    <i data-lucide="eraser" class="tool-icon"></i>
                                    <span>Eraser</span>
                                </button>
                                <button id="lineBtn" class="tool-btn" title="Line Tool">
                                    <i data-lucide="minus" class="tool-icon"></i>
                                    <span>Line</span>
                                </button>
                                <button id="rectangleBtn" class="tool-btn" title="Rectangle Tool">
                                    <i data-lucide="square" class="tool-icon"></i>
                                    <span>Rectangle</span>
                                </button>
                                <button id="circleBtn" class="tool-btn" title="Circle Tool">
                                    <i data-lucide="circle" class="tool-icon"></i>
                                    <span>Circle</span>
                                </button>
                            </div>
                            <div class="eraser-settings panel-settings" id="eraserSettings" style="display: none;">
                                <h4>Eraser Settings</h4>
                                <div class="setting-row">
                                    <label for="eraserSize">Brush Size:</label>
                                    <div class="slider-group">
                                        <input type="range" id="eraserSize" min="1" max="40" value="20">
                                        <span id="eraserSizeValue">20</span>
                                    </div>
                                </div>
                                <div class="setting-row">
                                    <label for="eraserShape">Brush Shape:</label>
                                    <select id="eraserShape" class="shape-select">
                                        <option value="circle">Circle</option>
                                        <option value="square">Square</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Patterns Tab -->
                    <div class="sidebar-panel" data-panel="patterns">
                        <div class="sidebar-panel-header"><h2>Patterns</h2></div>
                        <div class="sidebar-panel-content sidebar-panel-content--patterns">
                            <div class="pattern-search">
                                <input type="text" id="patternSearch" placeholder="Search patterns..." class="search-input">
                                <i data-lucide="search" class="search-icon"></i>
                            </div>
                            <div class="pattern-tree" id="patternTree">
                                <!-- Tree will be dynamically populated by JavaScript -->
                            </div>
                            <div class="search-results" id="searchResults" style="display: none;">
                                <h4>Search Results</h4>
                                <div class="search-results-list"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Recordings Tab -->
                    <div class="sidebar-panel" data-panel="recordings">
                        <div class="sidebar-panel-header sidebar-panel-header--with-actions">
                            <h2>Recordings</h2>
                            <div class="panel-header-actions">
                                <button id="importRecordingsBtn" class="panel-header-btn" title="Import recordings from file" data-tooltip="Import" data-tooltip-pos="bottom">
                                    <i data-lucide="upload" class="panel-header-icon"></i>
                                </button>
                                <button id="exportAllRecordingsBtn" class="panel-header-btn" title="Export all recordings" data-tooltip="Export All" data-tooltip-pos="bottom">
                                    <i data-lucide="download" class="panel-header-icon"></i>
                                </button>
                                <button id="loadRecordingsBtn" class="panel-header-btn" title="Refresh recordings" data-tooltip="Refresh" data-tooltip-pos="bottom">
                                    <i data-lucide="refresh-cw" class="panel-header-icon"></i>
                                </button>
                            </div>
                        </div>
                        <div class="sidebar-panel-content sidebar-panel-content--recordings">
                            <div class="recordings-list" id="recordingsList">
                                <p class="no-recordings">No recordings available. Start recording to save your simulations!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="main-content">
                <div class="game-container">
                    <canvas id="gameCanvas" width="600" height="400"></canvas>
                    <button id="exitFullscreenBtn" class="exit-fullscreen-btn" style="display: none;" title="Exit Fullscreen (ESC)" data-tooltip="Exit Fullscreen" data-tooltip-pos="left">
                        <i data-lucide="minimize" class="btn-icon"></i>
                    </button>
                    
                    <!-- Floating Controls for Fullscreen -->
                    <div class="fullscreen-floating-controls" id="fullscreenFloatingControls" style="display: none;">
                        <button id="fullscreenPlayPauseBtn" class="floating-control-btn" title="Play/Pause" data-tooltip="Play/Pause" data-tooltip-pos="left">
                            <i data-lucide="play" class="btn-icon"></i>
                        </button>
                        <button id="fullscreenShuffleBtn" class="floating-control-btn" title="Generate Random Pattern" data-tooltip="Random" data-tooltip-pos="left">
                            <i data-lucide="shuffle" class="btn-icon"></i>
                        </button>
                        <button id="fullscreenClearBtn" class="floating-control-btn" title="Clear All Cells" data-tooltip="Clear" data-tooltip-pos="left">
                            <i data-lucide="trash-2" class="btn-icon"></i>
                        </button>
                    </div>
                </div>

                <!-- Timeline Bar (always visible, disabled when running or empty) -->
                <div class="timeline-bar-compact" id="timelineBarCompact">
                    <!-- Recording info (shown during playback of saved recording) -->
                    <div class="timeline-recording-info" id="timelineRecordingInfo" style="display: none;">
                        <span class="recording-label" id="playbackRecordingName">Recording Name</span>
                        <span class="recording-date" id="playbackRecordingDate"></span>
                    </div>

                    <button id="timelinePlayBtn" class="timeline-bar-btn" title="Play Recording" data-tooltip="Play" disabled>
                        <i data-lucide="play" class="timeline-bar-icon"></i>
                    </button>
                    <div class="timeline-bar-track">
                        <input type="range" id="timelineBarSlider" min="0" max="0" value="0" class="timeline-bar-slider" disabled>
                    </div>
                    <span class="timeline-bar-frame" id="timelineBarFrame">0 / 0</span>

                    <!-- Playback speed -->
                    <div class="timeline-speed-control">
                        <input type="number" id="playbackSpeed" class="timeline-speed-input" min="1" max="80" value="40" title="Playback Speed (fps)">
                        <span class="timeline-speed-label">fps</span>
                    </div>

                    <!-- Normal mode buttons -->
                    <div class="timeline-normal-controls" id="timelineNormalControls">
                        <button id="saveRecordingBtn" class="timeline-bar-btn timeline-save-btn" title="Save Recording" data-tooltip="Save" disabled>
                            <i data-lucide="save" class="timeline-bar-icon"></i>
                        </button>
                        <button id="resetTimelineBtn" class="timeline-bar-btn timeline-reset-btn" title="Clear Recording" data-tooltip="Clear" disabled>
                            <i data-lucide="rotate-ccw" class="timeline-bar-icon"></i>
                        </button>
                    </div>

                    <!-- Playback mode button -->
                    <button id="closePlaybackBtn" class="timeline-bar-btn close-btn" title="Close Recording" data-tooltip="Close" style="display: none;">
                        <i data-lucide="x" class="timeline-bar-icon"></i>
                    </button>
                </div>

                <div class="info">
                                            <div class="info-left">
                            <div class="control-buttons">
                                <button id="startStopBtn" class="control-btn play-pause-btn" title="Start/Stop Simulation" data-tooltip="Start/Stop">
                                    <i data-lucide="play" class="btn-icon"></i>
                                </button>
                                <button id="resetBtn" class="control-btn" title="Reset to Initial State" data-tooltip="Reset">
                                    <i data-lucide="refresh-cw" class="btn-icon"></i>
                                </button>
                                <button id="randomBtn" class="control-btn" title="Generate Random Pattern" data-tooltip="Random">
                                    <i data-lucide="shuffle" class="btn-icon"></i>
                                </button>
                                <button id="clearBtn" class="control-btn" title="Clear All Cells" data-tooltip="Clear">
                                    <i data-lucide="trash-2" class="btn-icon"></i>
                                </button>
                                <button id="fullscreenBtn" class="control-btn" title="Enter Fullscreen" data-tooltip="Fullscreen">
                                    <i data-lucide="maximize" class="btn-icon"></i>
                                </button>
                            </div>
                        </div>
                    <div class="info-right">
                        <p>Generation: <span id="generation">0</span></p>
                        <p>Population: <span id="population">0</span></p>
                    </div>
                </div>

            </div>
        </div>

        <!-- Footer Bar -->
        <div class="app-footer-bar" id="appFooterBar">
            <div class="sidebar-footer-stats">
                <span id="sidebarStatGrid">150Ã—200</span>
                <span class="sidebar-footer-sep">Â·</span>
                <span id="sidebarStatCell">4px</span>
                <span class="sidebar-footer-sep">Â·</span>
                <span id="sidebarStatRule">B3/S23</span>
            </div>
            <div class="sidebar-footer-right">
                <a href="https://github.com/sworgkh/game-of-life-studio" target="_blank" rel="noopener noreferrer" class="footer-github-link" title="View on GitHub">
                    <i data-lucide="github"></i>
                </a>
                <span class="sidebar-footer-version">v1.0.0</span>
            </div>
        </div>
    </div>

    <!-- Save Pattern Modal -->
    <div class="modal-overlay" id="savePatternModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>ðŸ’¾ Save Pattern</h3>
                <button class="modal-close" id="patternModalClose" data-tooltip="Close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <label for="patternName">Pattern Name:</label>
                <input type="text" id="patternName" placeholder="Enter pattern name..." maxlength="30">
                <label for="patternCategory">Category:</label>
                <select id="patternCategory">
                    <option value="custom">Custom</option>
                    <option value="oscillators">Oscillators</option>
                    <option value="spaceships">Spaceships</option>
                    <option value="still-lifes">Still Lifes</option>
                    <option value="guns">Guns</option>
                    <option value="other">Other</option>
                </select>
                <div class="pattern-preview">
                    <canvas id="patternPreviewCanvas" width="100" height="100"></canvas>
                    <div class="pattern-stats">
                        <p>Size: <span id="patternSize">0Ã—0</span></p>
                        <p>Cells: <span id="patternCells">0</span></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelPatternSave" class="cancel-btn">Cancel</button>
                <button id="confirmPatternSave" class="save-btn">Save Pattern</button>
            </div>
        </div>
    </div>
    
    <!-- Save Recording Modal -->
    <div class="modal-overlay" id="saveModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>ðŸ’¾ Save Recording</h3>
                <button class="modal-close" id="modalClose" data-tooltip="Close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <label for="recordingName">Recording Name:</label>
                <input type="text" id="recordingName" placeholder="Enter recording name..." maxlength="50">

                <div class="range-selector">
                    <label>Frame Range:</label>
                    <div class="range-inputs">
                        <div class="range-input-group">
                            <label for="rangeStart">From:</label>
                            <input type="number" id="rangeStart" min="1" value="1">
                        </div>
                        <span class="range-separator">to</span>
                        <div class="range-input-group">
                            <label for="rangeEnd">To:</label>
                            <input type="number" id="rangeEnd" min="1" value="1">
                        </div>
                    </div>
                    <div class="range-slider-container">
                        <input type="range" id="rangeSliderStart" min="1" value="1" class="range-slider range-slider-start">
                        <input type="range" id="rangeSliderEnd" min="1" value="1" class="range-slider range-slider-end">
                    </div>
                </div>

                <div class="recording-stats">
                    <p>Frames to save: <span id="recordedGenerations">0</span></p>
                    <p>Duration: <span id="recordingDuration">0s</span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSave" class="cancel-btn">Cancel</button>
                <button id="confirmSave" class="save-btn">Save Recording</button>
            </div>
        </div>
    </div>

    <!-- Notification/Confirmation Modal -->
    <div class="modal-overlay" id="notificationModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Notification</h3>
                <button class="modal-close" id="notificationModalClose" data-tooltip="Close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Message goes here</p>
            </div>
            <div class="modal-footer">
                <button id="modalCancelBtn" class="cancel-btn">Cancel</button>
                <button id="modalConfirmBtn" class="save-btn">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/app.ts"></script>
</body>
</html>
